; Supervisor Configuration for Laravel Reverb WebSocket Server
; Copy this file to /etc/supervisor/conf.d/ on your production server
; File: /etc/supervisor/conf.d/laravel-reverb.conf

[program:laravel-reverb]
; Command to run the Reverb server
process_name=%(program_name)s
command=php /var/www/html/laravel-app/artisan reverb:start --host=0.0.0.0 --port=8080
; Adjust the path above to match your deployment path

; Auto-start and auto-restart configuration
autostart=true
autorestart=true

; User to run the process as (should match your web server user)
user=www-data

; Logging configuration
stdout_logfile=/var/www/html/laravel-app/storage/logs/reverb.log
stdout_logfile_maxbytes=10MB
stdout_logfile_backups=5
stderr_logfile=/var/www/html/laravel-app/storage/logs/reverb-error.log
stderr_logfile_maxbytes=10MB
stderr_logfile_backups=5

; Stop signals
stopsignal=QUIT
stopwaitsecs=60

; Restart policy
startretries=3

; After making changes to this file, run:
; sudo supervisorctl reread
; sudo supervisorctl update
; sudo supervisorctl start laravel-reverb

; To check status:
; sudo supervisorctl status laravel-reverb

; To restart:
; sudo supervisorctl restart laravel-reverb

; To stop:
; sudo supervisorctl stop laravel-reverb
